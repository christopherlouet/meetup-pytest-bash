const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/slidev/CodeRunner-CqiKAuDU.js","assets/modules/unplugin-icons-BAY7Zn2p.js","assets/modules/vue-BcXR-XPM.js","assets/monaco/bundled-types-DlS-qEOd.js","assets/modules/file-saver-qMbZxJ5p.js","assets/monaco/bundled-types-DIajs1OS.css","assets/index-BMd8pJFY.js","assets/modules/shiki-4Ye-lH7Q.js","assets/modules/shiki-Bxv373Z5.css","assets/index-B5kTIHme.css","assets/slidev/context-Bv8MnJqM.js","assets/slidev/IconButton.vue_vue_type_script_setup_true_lang-D4RWKkIe.js","assets/CodeRunner-DcJPFc8h.css"])))=>i.map(i=>d[i]);
import{_ as L,l as V}from"../monaco/bundled-types-DlS-qEOd.js";import{d as J,r as M,z as U,aB as Y,O as q,p as k,f as F,o as R,g as W,b as G,i as I,k as Q,J as $,T as X}from"../modules/vue-BcXR-XPM.js";import{a as P}from"../modules/file-saver-qMbZxJ5p.js";import{a as ee,a0 as H}from"../index-BMd8pJFY.js";import{u as te}from"./context-Bv8MnJqM.js";var Z={exports:{}};(function(z){var f=function(){var x=String.fromCharCode,S="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",O="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",C={};function B(t,n){if(!C[t]){C[t]={};for(var s=0;s<t.length;s++)C[t][t.charAt(s)]=s}return C[t][n]}var v={compressToBase64:function(t){if(t==null)return"";var n=v._compress(t,6,function(s){return S.charAt(s)});switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(t){return t==null?"":t==""?null:v._decompress(t.length,32,function(n){return B(S,t.charAt(n))})},compressToUTF16:function(t){return t==null?"":v._compress(t,15,function(n){return x(n+32)})+" "},decompressFromUTF16:function(t){return t==null?"":t==""?null:v._decompress(t.length,16384,function(n){return t.charCodeAt(n)-32})},compressToUint8Array:function(t){for(var n=v.compress(t),s=new Uint8Array(n.length*2),i=0,r=n.length;i<r;i++){var c=n.charCodeAt(i);s[i*2]=c>>>8,s[i*2+1]=c%256}return s},decompressFromUint8Array:function(t){if(t==null)return v.decompress(t);for(var n=new Array(t.length/2),s=0,i=n.length;s<i;s++)n[s]=t[s*2]*256+t[s*2+1];var r=[];return n.forEach(function(c){r.push(x(c))}),v.decompress(r.join(""))},compressToEncodedURIComponent:function(t){return t==null?"":v._compress(t,6,function(n){return O.charAt(n)})},decompressFromEncodedURIComponent:function(t){return t==null?"":t==""?null:(t=t.replace(/ /g,"+"),v._decompress(t.length,32,function(n){return B(O,t.charAt(n))}))},compress:function(t){return v._compress(t,16,function(n){return x(n)})},_compress:function(t,n,s){if(t==null)return"";var i,r,c={},y={},m="",w="",d="",h=2,p=3,l=2,u=[],e=0,a=0,o;for(o=0;o<t.length;o+=1)if(m=t.charAt(o),Object.prototype.hasOwnProperty.call(c,m)||(c[m]=p++,y[m]=!0),w=d+m,Object.prototype.hasOwnProperty.call(c,w))d=w;else{if(Object.prototype.hasOwnProperty.call(y,d)){if(d.charCodeAt(0)<256){for(i=0;i<l;i++)e=e<<1,a==n-1?(a=0,u.push(s(e)),e=0):a++;for(r=d.charCodeAt(0),i=0;i<8;i++)e=e<<1|r&1,a==n-1?(a=0,u.push(s(e)),e=0):a++,r=r>>1}else{for(r=1,i=0;i<l;i++)e=e<<1|r,a==n-1?(a=0,u.push(s(e)),e=0):a++,r=0;for(r=d.charCodeAt(0),i=0;i<16;i++)e=e<<1|r&1,a==n-1?(a=0,u.push(s(e)),e=0):a++,r=r>>1}h--,h==0&&(h=Math.pow(2,l),l++),delete y[d]}else for(r=c[d],i=0;i<l;i++)e=e<<1|r&1,a==n-1?(a=0,u.push(s(e)),e=0):a++,r=r>>1;h--,h==0&&(h=Math.pow(2,l),l++),c[w]=p++,d=String(m)}if(d!==""){if(Object.prototype.hasOwnProperty.call(y,d)){if(d.charCodeAt(0)<256){for(i=0;i<l;i++)e=e<<1,a==n-1?(a=0,u.push(s(e)),e=0):a++;for(r=d.charCodeAt(0),i=0;i<8;i++)e=e<<1|r&1,a==n-1?(a=0,u.push(s(e)),e=0):a++,r=r>>1}else{for(r=1,i=0;i<l;i++)e=e<<1|r,a==n-1?(a=0,u.push(s(e)),e=0):a++,r=0;for(r=d.charCodeAt(0),i=0;i<16;i++)e=e<<1|r&1,a==n-1?(a=0,u.push(s(e)),e=0):a++,r=r>>1}h--,h==0&&(h=Math.pow(2,l),l++),delete y[d]}else for(r=c[d],i=0;i<l;i++)e=e<<1|r&1,a==n-1?(a=0,u.push(s(e)),e=0):a++,r=r>>1;h--,h==0&&(h=Math.pow(2,l),l++)}for(r=2,i=0;i<l;i++)e=e<<1|r&1,a==n-1?(a=0,u.push(s(e)),e=0):a++,r=r>>1;for(;;)if(e=e<<1,a==n-1){u.push(s(e));break}else a++;return u.join("")},decompress:function(t){return t==null?"":t==""?null:v._decompress(t.length,32768,function(n){return t.charCodeAt(n)})},_decompress:function(t,n,s){var i=[],r=4,c=4,y=3,m="",w=[],d,h,p,l,u,e,a,o={val:s(0),position:n,index:1};for(d=0;d<3;d+=1)i[d]=d;for(p=0,u=Math.pow(2,2),e=1;e!=u;)l=o.val&o.position,o.position>>=1,o.position==0&&(o.position=n,o.val=s(o.index++)),p|=(l>0?1:0)*e,e<<=1;switch(p){case 0:for(p=0,u=Math.pow(2,8),e=1;e!=u;)l=o.val&o.position,o.position>>=1,o.position==0&&(o.position=n,o.val=s(o.index++)),p|=(l>0?1:0)*e,e<<=1;a=x(p);break;case 1:for(p=0,u=Math.pow(2,16),e=1;e!=u;)l=o.val&o.position,o.position>>=1,o.position==0&&(o.position=n,o.val=s(o.index++)),p|=(l>0?1:0)*e,e<<=1;a=x(p);break;case 2:return""}for(i[3]=a,h=a,w.push(a);;){if(o.index>t)return"";for(p=0,u=Math.pow(2,y),e=1;e!=u;)l=o.val&o.position,o.position>>=1,o.position==0&&(o.position=n,o.val=s(o.index++)),p|=(l>0?1:0)*e,e<<=1;switch(a=p){case 0:for(p=0,u=Math.pow(2,8),e=1;e!=u;)l=o.val&o.position,o.position>>=1,o.position==0&&(o.position=n,o.val=s(o.index++)),p|=(l>0?1:0)*e,e<<=1;i[c++]=x(p),a=c-1,r--;break;case 1:for(p=0,u=Math.pow(2,16),e=1;e!=u;)l=o.val&o.position,o.position>>=1,o.position==0&&(o.position=n,o.val=s(o.index++)),p|=(l>0?1:0)*e,e<<=1;i[c++]=x(p),a=c-1,r--;break;case 2:return w.join("")}if(r==0&&(r=Math.pow(2,y),y++),i[a])m=i[a];else if(a===c)m=h+h.charAt(0);else return null;w.push(m),i[c++]=h+m.charAt(0),r--,h=m,r==0&&(r=Math.pow(2,y),y++)}}};return v}();z!=null?z.exports=f:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return f})})(Z);var oe=Z.exports;const N=P(oe),ne={class:"relative slidev-monaco-container"},ue=J({__name:"Monaco",props:{codeLz:{default:""},diffLz:{},lang:{default:"typescript"},readonly:{type:Boolean,default:!1},lineNumbers:{default:"off"},height:{default:"initial"},editorOptions:{},ata:{type:Boolean,default:!0},runnable:{type:Boolean,default:!1},writable:{},autorun:{type:[Boolean,String],default:!0},showOutputAt:{type:[null,Boolean,String,Number,Array]},outputHeight:{},highlightOutput:{type:Boolean,default:!0},runnerOptions:{}},setup(z){const f=z,x=X(()=>L(()=>import("./CodeRunner-CqiKAuDU.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])).then(l=>l.default)),S=M(N.decompressFromBase64(f.codeLz).trimEnd()),O=f.diffLz&&M(N.decompressFromBase64(f.diffLz).trimEnd()),C=U(()=>f.writable&&!f.readonly&&!1),v={ts:"typescript",js:"javascript"}[f.lang]??f.lang,n={typescript:"mts",javascript:"mjs",ts:"mts",js:"mjs"}[f.lang]??f.lang,s=M(),i=M(),r=M(0),c=M(),y=U(()=>f.height==="auto"?`${r.value}px`:f.height==="initial"?`${c.value}px`:f.height),m=M(),{$page:w,$renderContext:d}=te(),{currentSlideNo:h}=ee(),p=Y(()=>Math.abs(w.value-h.value)<=1&&m.value,l=>{["slide","presenter"].includes(d.value)?l():setTimeout(l,5e3)});return q(async()=>{const{default:l}=await L(async()=>{const{default:g}=await import("../monaco/bundled-types-DlS-qEOd.js").then(A=>A.u);return{default:g}},__vite__mapDeps([3,4,2,5])),{ata:u,monaco:e,editorOptions:a}=await l(),o=e.editor.createModel(S.value,v,e.Uri.parse(`file:///${H()}.${n}`));o.onDidChangeContent(()=>S.value=o.getValue());const j={automaticLayout:!0,readOnly:f.readonly,lineNumbers:f.lineNumbers,minimap:{enabled:!1},overviewRulerBorder:!1,overviewRulerLanes:0,padding:{top:10,bottom:10},lineNumbersMinChars:3,bracketPairColorization:{enabled:!1},tabSize:2,fontSize:11.5,fontFamily:"var(--slidev-code-font-family)",scrollBeyondLastLine:!1,useInlineViewWhenSpaceIsLimited:!1,...a,...f.editorOptions};let _;if(O){const g=e.editor.createModel(O.value,v,e.Uri.parse(`file:///${H()}.${n}`));g.onDidChangeContent(()=>S.value=o.getValue());const A=e.editor.createDiffEditor(i.value,{renderOverviewRuler:!1,...j});A.setModel({original:o,modified:g});const b=A.getOriginalEditor(),E=A.getModifiedEditor(),T=()=>{const D=Math.max(b.getContentHeight(),E.getContentHeight())+4;c.value??(c.value=D),r.value=D,k(()=>A.layout())};b.onDidContentSizeChange(T),E.onDidContentSizeChange(T),_=E}else{const g=e.editor.create(i.value,{model:o,lineDecorationsWidth:0,...j});g.onDidContentSizeChange(A=>{const b=A.contentHeight+4;c.value??(c.value=b),r.value=b,k(()=>_.layout())}),_=g}m.value=()=>{p(),L(()=>import("../monaco/bundled-types-DlS-qEOd.js").then(g=>g.v),__vite__mapDeps([3,4,2,5])),f.ata&&(u(_.getValue()),_.onDidChangeModelContent(V(1e3,()=>{u(_.getValue())})))};const K=_.layoutContentWidget.bind(_);_.layoutContentWidget=g=>{K(g),g.getId()==="editor.contrib.resizableContentHoverWidget"&&(g._resizableNode.domNode.style.transform=g._positionPreference===1?"translateY(calc(100% * (var(--slidev-slide-scale) - 1)))":"")},_.addAction({id:"slidev-save",label:"Save",keybindings:[e.KeyMod.CtrlCmd|e.KeyCode.KeyS],run:()=>{C.value,console.warn("[Slidev] this monaco editor is not writable, save action is ignored.")}}),k(()=>e.editor.remeasureFonts())}),(l,u)=>(R(),F("div",ne,[W("div",{ref_key:"outer",ref:s,class:"relative slidev-monaco-container-inner",style:Q({height:y.value})},[W("div",{ref_key:"container",ref:i,class:"absolute inset-0.5"},null,512)],4),f.runnable?(R(),G($(x),{key:0,modelValue:S.value,"onUpdate:modelValue":u[0]||(u[0]=e=>S.value=e),lang:$(v),autorun:f.autorun,"show-output-at":f.showOutputAt,height:f.outputHeight,"highlight-output":f.highlightOutput,"runner-options":f.runnerOptions},null,8,["modelValue","lang","autorun","show-output-at","height","highlight-output","runner-options"])):I("",!0)]))}});export{ue as _};
