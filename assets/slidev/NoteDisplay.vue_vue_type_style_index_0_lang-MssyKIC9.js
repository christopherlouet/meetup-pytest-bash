import{m as T}from"../modules/unplugin-icons-BAY7Zn2p.js";import{d as N,z as h,f as v,n as f,g as u,e as z,J as I,F as A,t as _,ae as F,ag as P,af as V,k as B,o as k,r as D,E as R,O as K,G as j,p as q}from"../modules/vue-BcXR-XPM.js";import{c as G,r as J}from"../monaco/bundled-types-DlS-qEOd.js";import{C as H,_ as O}from"../index-BMd8pJFY.js";const U=["title"],X={class:"flex gap-0.2 items-center min-w-16 font-mono mr1"},Q={"text-primary":""},W={op50:"","text-sm":""},Y={key:1,op50:"","flex-auto":"",pl1:""},Z={relative:"","flex-auto":"",h5:"","font-mono":"",flex:"~"},ee=["min","max"],te=N({__name:"ClicksSlider",props:{clicksContext:{},readonly:{type:Boolean},active:{type:Boolean,default:!0}},setup(L){const p=L,t=h(()=>p.clicksContext.total),g=h(()=>G(0,p.clicksContext.clicksStart,t.value)),m=h(()=>t.value-g.value+1),n=h({get(){return p.clicksContext.current>t.value?-1:p.clicksContext.current},set(s){p.clicksContext.current=s}}),b=h(()=>J(g.value,t.value+1));function x(){p.readonly||(n.value<0||n.value>t.value)&&(n.value=0)}return(s,a)=>{const d=T;return k(),v("div",{class:f(["flex gap-1 items-center select-none",m.value&&p.clicksContext.isMounted?"":"op50"]),title:`Clicks in this slide: ${m.value}`},[u("div",X,[z(d,{"text-sm":"",op50:""}),n.value>=0&&n.value!==I(H)&&s.active?(k(),v(A,{key:0},[a[2]||(a[2]=u("div",{"flex-auto":""},null,-1)),u("span",Q,_(n.value),1),a[3]||(a[3]=u("span",{op25:"","text-sm":""},"/",-1)),u("span",W,_(t.value),1)],64)):(k(),v("div",Y,_(t.value),1))]),u("div",Z,[(k(!0),v(A,null,P(b.value,r=>(k(),v("div",{key:r,border:"y main","of-hidden":"",relative:"",class:f([r===0?"rounded-l border-l":"",r===t.value?"rounded-r border-r":""]),style:B({width:m.value>0?`${1/m.value*100}%`:"100%"})},[u("div",{absolute:"","inset-0":"",class:f(r<=n.value&&s.active?"bg-primary op15":"")},null,2),u("div",{class:f([+r==+n.value&&s.active?"text-primary font-bold op100 border-primary":"op30 border-main",r===0?"rounded-l":"",r===t.value?"rounded-r":"border-r-2"]),"w-full":"","h-full":"","text-xs":"",flex:"","items-center":"","justify-center":"","z-1":""},_(r),3)],6))),128)),F(u("input",{"onUpdate:modelValue":a[0]||(a[0]=r=>n.value=r),class:f(["range",s.readonly?"pointer-events-none":""]),type:"range",min:g.value,max:t.value,step:1,absolute:"","inset-0":"","z-10":"",op0:"",style:B({"--thumb-width":`${1/(m.value+1)*100}%`}),onMousedown:x,onFocus:a[1]||(a[1]=r=>{var C;return(C=r.currentTarget)==null?void 0:C.blur()})},null,46,ee),[[V,n.value]])])],10,U)}}}),ce=O(te,[["__scopeId","data-v-63e4651f"]]),oe=["innerHTML"],se=["textContent"],le=["textContent"],S="slidev-note-fade",y="slidev-note-click-mark",ue=N({__name:"NoteDisplay",props:{class:{},noteHtml:{},note:{},highlight:{type:Boolean,default:!0},placeholder:{},clicksContext:{},autoScroll:{type:Boolean}},emits:["markerDblclick","markerClick"],setup(L,{emit:p}){const t=L,g=p,m=h(()=>{var s;return t.clicksContext!=null&&((s=t.noteHtml)==null?void 0:s.includes("slidev-note-click-mark"))}),n=D(null);function b(){var $,E;if(!n.value||!m.value)return;const s=Array.from(n.value.querySelectorAll(`.${y}`)),a=new Map,d=new Map;let r=0;for(const i of s){const l=Number(i.dataset.clicks);a.set(i,l);let o=i,e=i.parentElement;for(;e&&o!==n.value;)d.has(e)||d.set(e,[[null,r]]),d.get(e).push([o,l]),o=e,e=e.parentElement;r=l}const C=new Map;for(const[i,l]of d){let o=!1,e=0;for(const c of Array.from(i.childNodes)){let w=!1;for(;c===(($=l[e+1])==null?void 0:$[0]);)w=!0,e++;if(w)continue;let M=c;if(c.nodeType===3){if(!((E=c.textContent)!=null&&E.trim()))continue;M=document.createElement("span"),M.textContent=c.textContent,i.insertBefore(M,c),c.remove()}o||(o=e===0),C.set(M,l[e][1])}o||(l[0][1]=-1)}return i=>{const l=t.highlight;for(const[o,e]of d)o.classList.toggle(S,l&&!e.some(([c,w])=>w===i));for(const[o,e]of C)o.classList.toggle(S,l&&e!==i);for(const[o,e]of a)o.classList.remove(S),o.classList.toggle(`${y}-past`,l&&e<i),o.classList.toggle(`${y}-active`,l&&e===i),o.classList.toggle(`${y}-next`,l&&e===i+1),o.classList.toggle(`${y}-future`,l&&e>i+1),o.ondblclick=l?c=>{g("markerDblclick",c,e),!c.defaultPrevented&&(t.clicksContext.current=e,c.stopPropagation(),c.stopImmediatePropagation())}:null,o.onclick=l?c=>{g("markerClick",c,e)}:null,l&&t.autoScroll&&e===i&&o.scrollIntoView({block:"center",behavior:"smooth"})}}const x=D();return R(()=>[t.noteHtml,t.highlight],()=>{q(()=>{x.value=b()})},{immediate:!0}),K(()=>{b()}),j(()=>{var a,d;const s=((a=t.clicksContext)==null?void 0:a.current)??H;(d=x.value)==null||d.call(x,s)}),(s,a)=>s.noteHtml?(k(),v("div",{key:0,ref_key:"noteDisplay",ref:n,class:f(["prose overflow-auto outline-none slidev-note",[t.class,m.value?"slidev-note-with-clicks":""]]),innerHTML:s.noteHtml},null,10,oe)):s.note?(k(),v("div",{key:1,class:f(["prose overflow-auto outline-none slidev-note",t.class])},[u("p",{textContent:_(s.note)},null,8,se)],2)):(k(),v("div",{key:2,class:f(["prose overflow-auto outline-none opacity-50 italic select-none slidev-note",t.class])},[u("p",{textContent:_(t.placeholder||"No notes.")},null,8,le)],2))}});export{ce as C,ue as _};
